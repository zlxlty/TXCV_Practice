import numpy as np
from random import sample
from CV_HW4 import compute_H, ransac_H, match

p1 = np.array([[382, 79], [395, 98], [419, 119], [448, 107], 
    [388, 132], [410, 154], [383, 193], [403, 182], [408, 210], [450, 264],
    [483, 180], [488, 212], [581, 261], [514, 109], [530, 126], [475, 172], 
    [519, 194], [489, 320], [555, 311], [543, 189], [579, 104], [603, 95], 
    [552, 151], [580, 201], [523, 213], [554, 277], [600, 211], [385, 252], 
    [442, 179], [469, 52]])
p2 = np.array([[31, 60], [40, 80],[71, 110], [99, 106], [38, 121], 
    [56, 147], [21, 187], [47, 177], [41, 208], [86, 260], [127, 183], 
    [129, 213], [216, 263], [166, 119], [180, 134], [128, 176], [166, 199], 
    [127, 324], [188, 310], [190, 195], [221, 126], [240, 121], [198, 162], 
    [218, 209], [166, 219], [189, 279], [233, 216], [20, 256], [92, 175], 
    [125, 52]])
matches = np.array([[1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6], [7, 7], [8, 8], [9, 9], [10, 10],
    [11, 11], [12, 12], [13, 13], [14, 14], [15, 0], [16, 16], [17, 17], [18, 18], [19, 19], [20, 20],
    [21, 21], [22, 22], [23, 23], [24, 24], [25, 25], [26, 26], [27, 27], [28, 28], [29, 29], [0, 15]])

print('------------------------Q1-------------------------')
H = compute_H(p1, p2)
print(H)

print('------------------------Q2-------------------------')
best_H = ransac_H(matches, p1, p2, 30, 500)
print(best_H)